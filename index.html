<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Station Selection Form</title>
</head>
<body>
<h2>Station Finder</h2>
<form id="stationForm">
  <label for="numberInput">Choose a number (1-50):</label>
  <input type="number" id="numberInput" name="numberInput" min="1" max="50" required />
  <br><br>
  <label for="stationSelect">Select a station:</label>
  <select id="stationSelect" name="stationSelect" required>
    <option value="">Loading stations...</option>
  </select>
  <br><br>
  <button type="submit">Submit</button>
</form>
<p id="status"></p>

<script>
// Replace these URLs with your hosted endpoints
const stationsUrl = "https://script.google.com/macros/s/AKfycbyTC8RnUx-ye_QDPyt5AbqnML2O003-wJikeHInjz-T3KYH2Lz5jAuAMMiiIcmiCMKV/exec"; 
const submitUrl = "https://script.google.com/macros/s/AKfycbyTC8RnUx-ye_QDPyt5AbqnML2O003-wJikeHInjz-T3KYH2Lz5jAuAMMiiIcmiCMKV/exec"; 

// Load stations
fetch(stationsUrl)
  .then(response => response.json())
  .then(data => {
    const select = document.getElementById('stationSelect');
    select.innerHTML = '';
    data.stations.forEach(station => {
      const option = document.createElement('option');
      option.value = station;
      option.innerText = station;
      select.appendChild(option);
    });
  })
  .catch(err => {
    document.getElementById('stationSelect').innerHTML = '<option>Error loading stations</option>';
    console.error('Error fetching stations:', err);
  });

// Submit handler
document.getElementById('stationForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const number = document.getElementById('numberInput').value;
  const station = document.getElementById('stationSelect').value;

  if (!number || !station) {
    alert('Please fill out all fields.');
    return;
  }

  fetch(submitUrl, {
    method: 'POST',
    body: JSON.stringify({ number: number, station: station }),
    headers: { 'Content-Type': 'application/json' }
  })
  .then(res => res.text())
  .then(msg => {
    document.getElementById('status').innerText = 'Thank you! Your entry has been recorded.';
  })
  .catch(err => {
    document.getElementById('status').innerText = 'Error submitting your entry.';
    console.error('Error submitting:', err);
  });
});
</script>
</body>
</html>
